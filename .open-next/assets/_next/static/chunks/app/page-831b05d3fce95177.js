(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{8639:(e,t,r)=>{Promise.resolve().then(r.bind(r,6647))},6647:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>O});var a=r(1133),i=r(1321);class n{async getSimulation(e){return this.simulations.get(e)||null}async createSimulation(e){let t=e.id||"sim_".concat(Date.now());return e.id=t,this.simulations.set(t,e),t}async updateSimulation(e,t){let r=this.simulations.get(e);r&&this.simulations.set(e,{...r,...t})}async getCompany(e){return this.companies.get(e)||null}async getCompaniesBySimulation(e){return Array.from(this.companies.values()).filter(t=>t.simulationId===e)}async createCompany(e){let t=e.id||"company_".concat(Date.now());return e.id=t,this.companies.set(t,e),t}async updateCompany(e,t){let r=this.companies.get(e);r&&this.companies.set(e,{...r,...t})}async getProduct(e){return this.products.get(e)||null}async getProductsByCompany(e){return Array.from(this.products.values()).filter(t=>t.companyId===e)}async createProduct(e){let t=e.id||"product_".concat(Date.now());return e.id=t,this.products.set(t,e),t}async updateProduct(e,t){let r=this.products.get(e);r&&this.products.set(e,{...r,...t})}async getDecision(e){return this.decisions.get(e)||null}async getDecisionsByCompany(e,t){let r=Array.from(this.decisions.values()).filter(t=>t.companyId===e);return void 0!==t&&(r=r.filter(e=>e.period===t)),r}async createDecision(e){let t=e.id||"decision_".concat(Date.now());return e.id=t,this.decisions.set(t,e),t}async updateDecision(e,t){let r=this.decisions.get(e);r&&this.decisions.set(e,{...r,...t})}async getMarketConditions(e,t){let r="".concat(e,"_").concat(t);return this.marketConditions.get(r)||null}async createMarketConditions(e){let t=e.id||"market_".concat(Date.now());e.id=t;let r="".concat(e.simulationId,"_").concat(e.period);return this.marketConditions.set(r,e),t}async getPerformanceResults(e,t){let r="".concat(e,"_").concat(t);return this.performanceResults.get(r)||null}async getPerformanceHistory(e){return Array.from(this.performanceResults.values()).filter(t=>t.companyId===e).sort((e,t)=>e.period-t.period)}async createPerformanceResults(e){let t=e.id||"perf_".concat(Date.now());e.id=t;let r="".concat(e.companyId,"_").concat(e.period);return this.performanceResults.set(r,e),t}async getProductPerformance(e,t){let r="".concat(e,"_").concat(t);return this.productPerformance.get(r)||null}async getProductPerformanceHistory(e){return Array.from(this.productPerformance.values()).filter(t=>t.productId===e).sort((e,t)=>e.period-t.period)}async createProductPerformance(e){let t=e.id||"prod_perf_".concat(Date.now());e.id=t;let r="".concat(e.productId,"_").concat(e.period);return this.productPerformance.set(r,e),t}async getEvents(e,t){let r=Array.from(this.events.values()).filter(t=>t.simulationId===e);return void 0!==t&&(r=r.filter(e=>e.period===t)),r}async createEvent(e){let t=e.id||"event_".concat(Date.now());return e.id=t,this.events.set(t,e),t}async getUser(e){return this.users.get(e)||null}async getUserByEmail(e){return Array.from(this.users.values()).find(t=>t.email===e)||null}async createUser(e){let t=e.id||"user_".concat(Date.now());return e.id=t,this.users.set(t,e),t}async updateUser(e,t){let r=this.users.get(e);r&&this.users.set(e,{...r,...t})}constructor(){this.simulations=new Map,this.companies=new Map,this.products=new Map,this.decisions=new Map,this.marketConditions=new Map,this.performanceResults=new Map,this.productPerformance=new Map,this.events=new Map,this.users=new Map}}let s=(0,i.createContext)(null);function o(e){let{children:t}=e,r=new n;return(0,a.jsx)(s.Provider,{value:r,children:t})}let c=(0,i.createContext)({user:null,loading:!0,error:null,login:async()=>{},logout:()=>{},register:async()=>{}});function d(e){let{children:t}=e,[r,n]=(0,i.useState)(null),[o,d]=(0,i.useState)(!0),[l,u]=(0,i.useState)(null),m=function(){let e=(0,i.useContext)(s);if(!e)throw Error("useDatabase must be used within a DatabaseProvider");return e}();(0,i.useEffect)(()=>{(async()=>{try{let e=await m.getUserByEmail("demo@example.com");e&&n({id:e.id,name:e.name,email:e.email,role:e.role}),d(!1)}catch(e){u("Failed to check session: "+(e instanceof Error?e.message:String(e))),d(!1)}})()},[m]);let p=async(e,t)=>{try{d(!0),u(null);let t=await m.getUserByEmail(e);if(!t)throw Error("Invalid email or password");n({id:t.id,name:t.name,email:t.email,role:t.role}),d(!1)}catch(e){throw u("Login failed: "+(e instanceof Error?e.message:String(e))),d(!1),e}},h=async(e,t,r)=>{try{if(d(!0),u(null),await m.getUserByEmail(t))throw Error("Email already in use");let r=await m.createUser({id:"user_".concat(Date.now()),name:e,email:t,passwordHash:"$2a$10$demopasswordhashvalue",role:"user",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),a=await m.getUser(r);if(!a)throw Error("Failed to create user");n({id:a.id,name:a.name,email:a.email,role:a.role}),d(!1)}catch(e){throw u("Registration failed: "+(e instanceof Error?e.message:String(e))),d(!1),e}};return(0,a.jsx)(c.Provider,{value:{user:r,loading:o,error:l,login:p,logout:()=>{n(null)},register:h},children:t})}function l(){let e=(0,i.useContext)(c);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}function u(e){let{onSuccess:t,onRegisterClick:r}=e,{login:n,error:s,loading:o}=l(),[c,d]=(0,i.useState)(""),[u,m]=(0,i.useState)(""),[p,h]=(0,i.useState)(null),g=async e=>{if(e.preventDefault(),h(null),!c||!u){h("Please enter both email and password");return}try{await n(c,u),t&&t()}catch(e){h(e.message||"Login failed")}};return(0,a.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-md",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Login to Business Simulation"}),(p||s)&&(0,a.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:p||s}),(0,a.jsxs)("form",{onSubmit:g,children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"email",children:"Email"}),(0,a.jsx)("input",{id:"email",type:"email",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",value:c,onChange:e=>d(e.target.value),placeholder:"Enter your email",required:!0})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"password",children:"Password"}),(0,a.jsx)("input",{id:"password",type:"password",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",value:u,onChange:e=>m(e.target.value),placeholder:"Enter your password",required:!0})]}),(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsx)("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full",disabled:o,children:o?"Logging in...":"Login"})}),(0,a.jsx)("div",{className:"mt-4 text-center",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",(0,a.jsx)("button",{type:"button",className:"text-blue-500 hover:text-blue-700",onClick:r,children:"Register"})]})})]})]})}function m(e){let{onSuccess:t,onLoginClick:r}=e,{register:n,error:s,loading:o}=l(),[c,d]=(0,i.useState)(""),[u,m]=(0,i.useState)(""),[p,h]=(0,i.useState)(""),[g,y]=(0,i.useState)(""),[x,f]=(0,i.useState)(null),b=async e=>{if(e.preventDefault(),f(null),!c||!u||!p||!g){f("Please fill in all fields");return}if(p!==g){f("Passwords do not match");return}try{await n(c,u,p),t&&t()}catch(e){f(e.message||"Registration failed")}};return(0,a.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-md",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Create an Account"}),(x||s)&&(0,a.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:x||s}),(0,a.jsxs)("form",{onSubmit:b,children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"name",children:"Full Name"}),(0,a.jsx)("input",{id:"name",type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",value:c,onChange:e=>d(e.target.value),placeholder:"Enter your full name",required:!0})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"email",children:"Email"}),(0,a.jsx)("input",{id:"email",type:"email",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",value:u,onChange:e=>m(e.target.value),placeholder:"Enter your email",required:!0})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"password",children:"Password"}),(0,a.jsx)("input",{id:"password",type:"password",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",value:p,onChange:e=>h(e.target.value),placeholder:"Enter your password",required:!0})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"confirmPassword",children:"Confirm Password"}),(0,a.jsx)("input",{id:"confirmPassword",type:"password",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",value:g,onChange:e=>y(e.target.value),placeholder:"Confirm your password",required:!0})]}),(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsx)("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full",disabled:o,children:o?"Registering...":"Register"})}),(0,a.jsx)("div",{className:"mt-4 text-center",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",(0,a.jsx)("button",{type:"button",className:"text-blue-500 hover:text-blue-700",onClick:r,children:"Login"})]})})]})]})}function p(e){let{onAuthSuccess:t}=e,[r,n]=(0,i.useState)(!0),s=()=>{t&&t()};return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-center text-3xl font-extrabold text-gray-900",children:"Business Simulation"}),(0,a.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Make strategic decisions and grow your virtual company"})]}),r?(0,a.jsx)(u,{onSuccess:s,onRegisterClick:()=>n(!1)}):(0,a.jsx)(m,{onSuccess:s,onLoginClick:()=>n(!0)})]})})}class h{getState(){return this.state}advancePeriod(){return this.processDecisions(),this.updateMarketConditions(),this.calculatePerformance(),this.state.currentPeriod+=1,this.state}processDecisions(){let e=this.state.decisions.filter(e=>e.period===this.state.currentPeriod&&!e.processed),t={};e.forEach(e=>{t[e.companyId]||(t[e.companyId]=[]),t[e.companyId].push(e)}),Object.entries(t).forEach(e=>{let[t,r]=e,a=this.state.companies.find(e=>e.id===t);a&&r.forEach(e=>{this.processDecision(a,e),e.processed=!0,e.processedAt=new Date().toISOString()})})}processDecision(e,t){let r=t.data;switch(t.type){case"product_development":this.processProductDevelopment(e,r);break;case"pricing":this.processPricing(e,r);break;case"production":this.processProduction(e,r);break;case"marketing":this.processMarketing(e,r);break;case"research":this.processResearch(e,r);break;case"human_resources":this.processHumanResources(e,r);break;case"finance":this.processFinance(e,r)}}processProductDevelopment(e,t){if("new_product"===t.action){let r={id:"product_".concat(Date.now()),companyId:e.id,name:t.name,description:t.description||"",category:t.category,qualityRating:t.qualityRating||5,innovationRating:t.innovationRating||5,sustainabilityRating:t.sustainabilityRating||5,productionCost:t.productionCost,sellingPrice:t.sellingPrice,inventoryLevel:0,productionCapacity:t.productionCapacity||1e3,developmentCost:t.developmentCost||0,marketingBudget:0,status:"development",launchPeriod:this.state.currentPeriod+(t.developmentTime||1),data:JSON.stringify({features:t.features||[],targetAudience:t.targetAudience||""}),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};this.state.products.push(r),e.cashBalance-=t.developmentCost||0}else if("update_product"===t.action){let r=this.state.products.find(e=>e.id===t.productId);if(!r)return;t.name&&(r.name=t.name),t.description&&(r.description=t.description),t.qualityRating&&(r.qualityRating=t.qualityRating),t.innovationRating&&(r.innovationRating=t.innovationRating),t.sustainabilityRating&&(r.sustainabilityRating=t.sustainabilityRating),t.productionCost&&(r.productionCost=t.productionCost),t.productionCapacity&&(r.productionCapacity=t.productionCapacity);let a=JSON.parse(r.data);t.features&&(a.features=t.features),t.targetAudience&&(a.targetAudience=t.targetAudience),r.data=JSON.stringify(a),r.updatedAt=new Date().toISOString(),t.developmentCost&&(e.cashBalance-=t.developmentCost)}else if("discontinue_product"===t.action){let e=this.state.products.find(e=>e.id===t.productId);if(!e)return;e.status="discontinued",e.discontinuePeriod=this.state.currentPeriod,e.updatedAt=new Date().toISOString()}}processPricing(e,t){if(t.productId){let r=this.state.products.find(r=>r.id===t.productId&&r.companyId===e.id);r&&(r.sellingPrice=t.price,r.updatedAt=new Date().toISOString())}else t.products&&t.products.forEach(t=>{let r=this.state.products.find(r=>r.id===t.productId&&r.companyId===e.id);r&&(r.sellingPrice=t.price,r.updatedAt=new Date().toISOString())})}processProduction(e,t){if(t.productId){let r=this.state.products.find(r=>r.id===t.productId&&r.companyId===e.id);if(!r)return;let a=Math.min(t.productionVolume,r.productionCapacity),i=a*r.productionCost;r.inventoryLevel+=a,e.cashBalance-=i,r.updatedAt=new Date().toISOString()}else if(t.products){let r=0;t.products.forEach(t=>{let a=this.state.products.find(r=>r.id===t.productId&&r.companyId===e.id);if(!a)return;let i=Math.min(t.productionVolume,a.productionCapacity),n=i*a.productionCost;a.inventoryLevel+=i,r+=n,a.updatedAt=new Date().toISOString()}),e.cashBalance-=r}if(t.capacityExpansion){let r=this.state.products.find(r=>r.id===t.capacityExpansion.productId&&r.companyId===e.id);if(!r)return;r.productionCapacity+=t.capacityExpansion.capacityIncrease,e.cashBalance-=t.capacityExpansion.investmentAmount,r.updatedAt=new Date().toISOString()}}processMarketing(e,t){if(t.productId){let r=this.state.products.find(r=>r.id===t.productId&&r.companyId===e.id);r&&(r.marketingBudget=t.budget,e.cashBalance-=t.budget,r.updatedAt=new Date().toISOString())}else if(t.products){let r=0;t.products.forEach(t=>{let a=this.state.products.find(r=>r.id===t.productId&&r.companyId===e.id);a&&(a.marketingBudget=t.budget,r+=t.budget,a.updatedAt=new Date().toISOString())}),e.cashBalance-=r}else if("company"===t.campaignType){e.cashBalance-=t.budget;let r={id:"campaign_".concat(Date.now()),companyId:e.id,name:t.name,budget:t.budget,startPeriod:this.state.currentPeriod,duration:t.duration||1,targetSegment:t.targetSegment||"all",channelAllocation:t.channelAllocation||{},message:t.message||""},a=JSON.parse(e.data);a.marketingCampaigns||(a.marketingCampaigns=[]),a.marketingCampaigns.push(r),e.data=JSON.stringify(a)}}processResearch(e,t){let r={id:"research_".concat(Date.now()),companyId:e.id,name:t.name,description:t.description||"",type:t.type,budget:t.budget,startPeriod:this.state.currentPeriod,duration:t.duration||1,progress:0,status:"active"};e.cashBalance-=t.budget;let a=JSON.parse(e.data);a.researchProjects||(a.researchProjects=[]),a.researchProjects.push(r),e.data=JSON.stringify(a)}processHumanResources(e,t){let r=JSON.parse(e.data);r.humanResources||(r.humanResources={totalEmployees:100,averageSalary:5e4,trainingBudget:0,employeeSatisfaction:50,productivity:1,turnoverRate:.15});let a=r.humanResources;if(t.hiring){a.totalEmployees+=t.hiring.newEmployees;let r=t.hiring.newEmployees*(.2*a.averageSalary);e.cashBalance-=r}if(t.salary){let r=a.averageSalary;a.averageSalary=t.salary.newAverageSalary;let i=(a.averageSalary-r)*a.totalEmployees;e.cashBalance-=i}t.training&&(a.trainingBudget=t.training.budget,e.cashBalance-=t.training.budget),e.data=JSON.stringify(r)}processFinance(e,t){if("loan"===t.action){e.cashBalance+=t.amount,e.totalLiabilities+=t.amount;let r=JSON.parse(e.data);r.loans||(r.loans=[]),r.loans.push({id:"loan_".concat(Date.now()),amount:t.amount,interestRate:t.interestRate,term:t.term,startPeriod:this.state.currentPeriod,remainingAmount:t.amount}),e.data=JSON.stringify(r)}else if("repay_loan"===t.action){let r=JSON.parse(e.data);if(!r.loans)return;let a=r.loans.find(e=>e.id===t.loanId);if(!a)return;let i=Math.min(t.amount,a.remainingAmount);a.remainingAmount-=i,e.cashBalance-=i,e.totalLiabilities-=i,e.data=JSON.stringify(r)}else if("dividend"===t.action){e.cashBalance-=t.amount;let r=JSON.parse(e.data);r.dividends||(r.dividends=[]),r.dividends.push({period:this.state.currentPeriod,amount:t.amount}),e.data=JSON.stringify(r)}}updateMarketConditions(){let e=this.state.marketConditions.find(e=>e.period===this.state.currentPeriod);if(!e)return;let t=this.state.currentPeriod+1,r=JSON.parse(e.segmentDistribution),a=JSON.parse(e.economicIndicators),i=JSON.parse(e.consumerPreferences),n=JSON.parse(e.technologyTrends),s=1+(.1*Math.random()-.05),o=e.totalMarketSize*s;Object.keys(r).forEach(e=>{let t=1+(.06*Math.random()-.03);r[e]*=t});let c=Object.values(r).reduce((e,t)=>e+t,0);Object.keys(r).forEach(e=>{r[e]/=c}),a.gdp_growth+=.01*Math.random()-.005,a.inflation_rate+=.01*Math.random()-.005,a.interest_rate+=.01*Math.random()-.005,a.unemployment_rate+=.01*Math.random()-.005,a.consumer_confidence+=5*Math.random()-2.5,a.business_sentiment+=5*Math.random()-2.5,Object.keys(i).forEach(e=>{Object.keys(i[e]).forEach(t=>{i[e][t]+=.1*Math.random()-.05,i[e][t]=Math.max(0,Math.min(1,i[e][t]))})});let d=.05*Math.random(),l=Math.min(1,e.sustainabilityImportance+d),u={id:"market_".concat(t),simulationId:e.simulationId,period:t,totalMarketSize:o,segmentDistribution:JSON.stringify(r),economicIndicators:JSON.stringify(a),consumerPreferences:JSON.stringify(i),technologyTrends:JSON.stringify(n),sustainabilityImportance:l,data:"{}",createdAt:new Date().toISOString()};this.state.marketConditions.push(u),this.generateMarketEvents(t)}generateMarketEvents(e){let t;if(Math.random()>.3)return;let r=["economic","technological","regulatory","competitive","consumer"];switch(r[Math.floor(Math.random()*r.length)]){case"economic":t=this.generateEconomicEvent(e);break;case"technological":t=this.generateTechnologicalEvent(e);break;case"regulatory":t=this.generateRegulatoryEvent(e);break;case"competitive":t=this.generateCompetitiveEvent(e);break;case"consumer":t=this.generateConsumerEvent(e);break;default:return}t&&this.state.events.push(t)}generateEconomicEvent(e){let t=[{name:"Economic Boom",description:"A strong economic growth period has begun, increasing consumer spending across all segments.",impactArea:"market_size",impactStrength:.15,type:"economic"},{name:"Economic Recession",description:"An economic downturn has begun, reducing consumer spending across all segments.",impactArea:"market_size",impactStrength:-.1,type:"economic"},{name:"Interest Rate Hike",description:"Central bank has increased interest rates, affecting borrowing costs.",impactArea:"finance",impactStrength:.02,type:"economic"},{name:"Currency Fluctuation",description:"Significant currency value changes affecting import/export costs.",impactArea:"production_cost",impactStrength:Math.random()>.5?.08:-.08,type:"economic"}],r=t[Math.floor(Math.random()*t.length)];return{id:"event_".concat(Date.now()),simulationId:this.state.id,period:e,type:"economic",name:r.name,description:r.description,impactArea:r.impactArea,impactStrength:r.impactStrength,affectedCompanies:null,data:JSON.stringify(r),createdAt:new Date().toISOString()}}generateTechnologicalEvent(e){let t=[{name:"Technological Breakthrough",description:"A major technological breakthrough has occurred, creating new opportunities for innovation.",impactArea:"innovation",impactStrength:.2,type:"technological"},{name:"Manufacturing Innovation",description:"New manufacturing techniques have been developed, potentially reducing production costs.",impactArea:"production_cost",impactStrength:-.1,type:"technological"},{name:"Digital Transformation Trend",description:"Increasing consumer preference for digitally-enabled products and services.",impactArea:"consumer_preferences",impactStrength:.15,type:"technological"}],r=t[Math.floor(Math.random()*t.length)];return{id:"event_".concat(Date.now()),simulationId:this.state.id,period:e,type:"technological",name:r.name,description:r.description,impactArea:r.impactArea,impactStrength:r.impactStrength,affectedCompanies:null,data:JSON.stringify(r),createdAt:new Date().toISOString()}}generateRegulatoryEvent(e){let t=[{name:"Environmental Regulations",description:"New environmental regulations require changes to production processes.",impactArea:"sustainability",impactStrength:.25,type:"regulatory"},{name:"Tax Policy Change",description:"Changes in tax policy affecting corporate profits.",impactArea:"finance",impactStrength:-.05,type:"regulatory"},{name:"Labor Law Changes",description:"New labor laws affecting employment costs and practices.",impactArea:"human_resources",impactStrength:.08,type:"regulatory"}],r=t[Math.floor(Math.random()*t.length)];return{id:"event_".concat(Date.now()),simulationId:this.state.id,period:e,type:"regulatory",name:r.name,description:r.description,impactArea:r.impactArea,impactStrength:r.impactStrength,affectedCompanies:null,data:JSON.stringify(r),createdAt:new Date().toISOString()}}generateCompetitiveEvent(e){let t=[{name:"New Market Entrant",description:"A new competitor has entered the market with innovative products.",impactArea:"market_share",impactStrength:-.05,type:"competitive"},{name:"Competitor Price War",description:"A major competitor has significantly reduced prices to gain market share.",impactArea:"pricing",impactStrength:-.1,type:"competitive"},{name:"Industry Consolidation",description:"Merger between competitors creating a stronger market player.",impactArea:"competition",impactStrength:.15,type:"competitive"}],r=t[Math.floor(Math.random()*t.length)];return{id:"event_".concat(Date.now()),simulationId:this.state.id,period:e,type:"competitive",name:r.name,description:r.description,impactArea:r.impactArea,impactStrength:r.impactStrength,affectedCompanies:null,data:JSON.stringify(r),createdAt:new Date().toISOString()}}generateConsumerEvent(e){let t=[{name:"Shifting Consumer Preferences",description:"Consumers are showing stronger preference for sustainable products.",impactArea:"consumer_preferences",impactStrength:.2,type:"consumer"},{name:"Quality Expectations Increase",description:"Consumers are demanding higher quality products across all segments.",impactArea:"quality",impactStrength:.15,type:"consumer"},{name:"Brand Loyalty Shift",description:"Consumers are becoming less brand loyal and more value-focused.",impactArea:"marketing",impactStrength:-.1,type:"consumer"}],r=t[Math.floor(Math.random()*t.length)];return{id:"event_".concat(Date.now()),simulationId:this.state.id,period:e,type:"consumer",name:r.name,description:r.description,impactArea:r.impactArea,impactStrength:r.impactStrength,affectedCompanies:null,data:JSON.stringify(r),createdAt:new Date().toISOString()}}calculatePerformance(){let e=this.state.marketConditions.find(e=>e.period===this.state.currentPeriod);e&&(JSON.parse(e.segmentDistribution),JSON.parse(e.consumerPreferences),e.totalMarketSize,this.state.companies.forEach(t=>{let r=this.state.products.filter(e=>e.companyId===t.id&&"active"===e.status);if(0===r.length){this.createMinimalPerformanceResults(t);return}let a=0,i=0,n=0;r.forEach(t=>{let s=this.calculateProductPerformance(t,r,e);a+=s.revenue,i+=s.costs,n+=s.marketShare,this.state.productPerformance.push({id:"prod_perf_".concat(t.id,"_").concat(this.state.currentPeriod),productId:t.id,period:this.state.currentPeriod,salesVolume:s.salesVolume,revenue:s.revenue,costs:s.costs,profit:s.profit,marketShare:s.marketShare,customerSatisfaction:s.customerSatisfaction,data:JSON.stringify(s),createdAt:new Date().toISOString()}),t.inventoryLevel=Math.max(0,t.inventoryLevel-s.salesVolume)});let s=a-i,o=i>0?s/i:0,c=JSON.parse(t.data).humanResources||{employeeSatisfaction:50},d=this.state.productPerformance.filter(e=>e.period===this.state.currentPeriod).filter(e=>{let r=this.state.products.find(t=>t.id===e.productId);return r&&r.companyId===t.id}).reduce((e,t)=>e+t.customerSatisfaction,0)/r.length,l=r.reduce((e,t)=>e+t.innovationRating,0)/r.length,u=r.reduce((e,t)=>e+t.sustainabilityRating,0)/r.length,m=.3*n+.3*d+.2*l+.2*u-5;t.cashBalance+=s,t.totalAssets=t.cashBalance+.5*a,t.brandValue=Math.max(1,Math.min(100,t.brandValue+m));let p={id:"perf_".concat(t.id,"_").concat(this.state.currentPeriod),companyId:t.id,period:this.state.currentPeriod,revenue:a,costs:i,profit:s,marketShare:n,cashFlow:s,roi:o,customerSatisfaction:d,employeeSatisfaction:c.employeeSatisfaction,sustainabilityScore:u,innovationScore:l,brandValueChange:m,data:JSON.stringify({productBreakdown:r.map(e=>{var t,r;return{productId:e.id,name:e.name,revenue:(null===(t=this.state.productPerformance.find(t=>t.productId===e.id&&t.period===this.state.currentPeriod))||void 0===t?void 0:t.revenue)||0,marketShare:(null===(r=this.state.productPerformance.find(t=>t.productId===e.id&&t.period===this.state.currentPeriod))||void 0===r?void 0:r.marketShare)||0}})}),createdAt:new Date().toISOString()};this.state.performanceResults.push(p)}))}createMinimalPerformanceResults(e){let t=JSON.parse(e.data).humanResources||{employeeSatisfaction:50};e.cashBalance-=5e4;let r={id:"perf_".concat(e.id,"_").concat(this.state.currentPeriod),companyId:e.id,period:this.state.currentPeriod,revenue:0,costs:5e4,profit:-5e4,marketShare:0,cashFlow:-5e4,roi:0,customerSatisfaction:0,employeeSatisfaction:t.employeeSatisfaction,sustainabilityScore:0,innovationScore:0,brandValueChange:-5,data:JSON.stringify({productBreakdown:[]}),createdAt:new Date().toISOString()};this.state.performanceResults.push(r),e.brandValue=Math.max(1,e.brandValue-5)}calculateProductPerformance(e,t,r){let a=JSON.parse(r.segmentDistribution),i=JSON.parse(r.consumerPreferences),n=r.totalMarketSize,s=e.category,o=a[s]||0,c=i[s]||{},d=t.filter(t=>"active"===t.status&&t.category===s&&t.id!==e.id),l=e.qualityRating*(c.quality_sensitivity||.5),u=(10-e.sellingPrice/50)*(c.price_sensitivity||.5),m=e.innovationRating*(c.innovation_preference||.5),p=e.sustainabilityRating*(c.sustainability_preference||.5),h=.5*Math.sqrt(e.marketingBudget/1e4),g=l+u+m+p+h,y=.1;if(d.length>0){let e=g+d.reduce((e,t)=>{let r=t.qualityRating*(c.quality_sensitivity||.5),a=(10-t.sellingPrice/50)*(c.price_sensitivity||.5);return e+r+a+t.innovationRating*(c.innovation_preference||.5)+t.sustainabilityRating*(c.sustainability_preference||.5)+.5*Math.sqrt(t.marketingBudget/1e4)},0);y=g/e}let x=y*o,f=Math.round(n*o*y/e.sellingPrice),b=Math.min(f,e.inventoryLevel),v=b*e.sellingPrice,w=b*e.productionCost,S=e.marketingBudget,j=w+S;return{salesVolume:b,potentialSales:f,revenue:v,productionCosts:w,marketingCosts:S,costs:j,profit:v-j,segmentMarketShare:y,marketShare:x,customerSatisfaction:Math.min(10,.4*l+.4*(e.qualityRating/(e.sellingPrice/50))+b/f*.2),attractivenessFactors:{qualityScore:l,priceScore:u,innovationScore:m,sustainabilityScore:p,marketingEffectiveness:h,totalAttractiveness:g}}}submitDecision(e,t){let r={id:"decision_".concat(Date.now()),companyId:e,period:this.state.currentPeriod,type:t.type,data:t.data,submittedAt:new Date().toISOString(),processed:!1,processedAt:null};this.state.decisions.push(r)}getCompanyPerformance(e,t){return void 0!==t?this.state.performanceResults.find(r=>r.companyId===e&&r.period===t)||null:this.state.performanceResults.filter(t=>t.companyId===e).sort((e,t)=>t.period-e.period)[0]||null}getAllCompanyPerformance(e){return this.state.performanceResults.filter(t=>t.companyId===e).sort((e,t)=>e.period-t.period)}getProductPerformance(e,t){return void 0!==t?this.state.productPerformance.find(r=>r.productId===e&&r.period===t)||null:this.state.productPerformance.filter(t=>t.productId===e).sort((e,t)=>t.period-e.period)[0]||null}getAllProductPerformance(e){return this.state.productPerformance.filter(t=>t.productId===e).sort((e,t)=>e.period-t.period)}getMarketConditions(e){return void 0!==e?this.state.marketConditions.find(t=>t.period===e)||null:this.state.marketConditions.sort((e,t)=>t.period-e.period)[0]||null}getEvents(e){return void 0!==e?this.state.events.filter(t=>t.period===e):this.state.events.sort((e,t)=>e.period-t.period)}getCompany(e){return this.state.companies.find(t=>t.id===e)||null}getCompanyProducts(e){return this.state.products.filter(t=>t.companyId===e)}getProduct(e){return this.state.products.find(t=>t.id===e)||null}constructor(e){this.state=e}}class g{static createDemoSimulation(){return new h({id:"sim_demo",name:"Business Strategy Simulation",description:"A simulation focused on strategic decision-making",config:JSON.stringify({initialCash:1e6,periods:12,marketSegments:["budget","mid-range","premium"],difficulty:"medium",eventsFrequency:.3}),currentPeriod:0,status:"active",createdBy:"user_demo",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),companies:[{id:"company_demo",simulationId:"sim_demo",userId:"user_demo",name:"TechInnovate Inc.",description:"A technology innovation company",logoUrl:null,cashBalance:1e6,totalAssets:1e6,totalLiabilities:0,creditRating:"B",brandValue:50,data:JSON.stringify({missionStatement:"To innovate and transform technology",competitiveStrategy:"differentiator",humanResources:{totalEmployees:100,averageSalary:5e4,trainingBudget:0,employeeSatisfaction:50,productivity:1,turnoverRate:.15}}),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}],products:[{id:"product_demo_1",companyId:"company_demo",name:"Premium Widget",description:"Our flagship premium widget",category:"premium",qualityRating:8.5,innovationRating:7.2,sustainabilityRating:6.8,productionCost:150,sellingPrice:300,inventoryLevel:1e3,productionCapacity:2e3,developmentCost:2e5,marketingBudget:5e4,status:"active",launchPeriod:0,discontinuePeriod:null,data:JSON.stringify({features:["Advanced AI","Premium Materials","Extended Warranty"],targetAudience:"High-income professionals"}),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"product_demo_2",companyId:"company_demo",name:"Standard Widget",description:"Our mid-range widget offering",category:"mid-range",qualityRating:6.5,innovationRating:5.8,sustainabilityRating:6,productionCost:75,sellingPrice:150,inventoryLevel:1500,productionCapacity:3e3,developmentCost:1e5,marketingBudget:3e4,status:"active",launchPeriod:0,discontinuePeriod:null,data:JSON.stringify({features:["Reliable Performance","Good Value"],targetAudience:"Middle-income consumers"}),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"product_demo_3",companyId:"company_demo",name:"Basic Widget",description:"Our entry-level widget",category:"budget",qualityRating:4.5,innovationRating:3.2,sustainabilityRating:5,productionCost:40,sellingPrice:80,inventoryLevel:0,productionCapacity:4e3,developmentCost:5e4,marketingBudget:0,status:"development",launchPeriod:1,discontinuePeriod:null,data:JSON.stringify({features:["Essential Functionality","Affordable"],targetAudience:"Budget-conscious consumers"}),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}],decisions:[],marketConditions:[{id:"market_demo_0",simulationId:"sim_demo",period:0,totalMarketSize:5e6,segmentDistribution:JSON.stringify({budget:.3,"mid-range":.4,premium:.3}),economicIndicators:JSON.stringify({gdp_growth:.028,inflation_rate:.021,interest_rate:.035,unemployment_rate:.042,consumer_confidence:102.8,business_sentiment:56.4}),consumerPreferences:JSON.stringify({budget:{price_sensitivity:.8,quality_sensitivity:.3,brand_loyalty:.2,innovation_preference:.2,sustainability_preference:.2},"mid-range":{price_sensitivity:.5,quality_sensitivity:.5,brand_loyalty:.4,innovation_preference:.4,sustainability_preference:.4},premium:{price_sensitivity:.3,quality_sensitivity:.8,brand_loyalty:.7,innovation_preference:.6,sustainability_preference:.6}}),technologyTrends:JSON.stringify([{name:"AI and Machine Learning",impact_area:"product_development",impact_strength:.25,adoption_rate:.4},{name:"Internet of Things",impact_area:"customer_experience",impact_strength:.2,adoption_rate:.35}]),sustainabilityImportance:.67,data:"{}",createdAt:new Date().toISOString()}],performanceResults:[],productPerformance:[],events:[]})}}let y=(0,i.createContext)({simulation:null,state:null,loading:!0,error:null,userCompany:null,companyProducts:[],advancePeriod:()=>{},submitDecision:()=>{},refreshState:()=>{}}),x=()=>(0,i.useContext)(y),f=e=>{let{children:t}=e,[r,n]=(0,i.useState)(null),[s,o]=(0,i.useState)(null),[c,d]=(0,i.useState)(!0),[l,u]=(0,i.useState)(null),[m,p]=(0,i.useState)(null),[h,x]=(0,i.useState)([]);(0,i.useEffect)(()=>{try{let e=g.createDemoSimulation();n(e);let t=e.getState();o(t);let r=t.companies.find(e=>"company_demo"===e.id);if(p(r||null),r){let e=t.products.filter(e=>e.companyId===r.id);x(e)}d(!1)}catch(e){u("Failed to initialize simulation: "+(e instanceof Error?e.message:String(e))),d(!1)}},[]);let f=()=>{if(r)try{let e=r.getState();if(o(e),m){let t=e.companies.find(e=>e.id===m.id);if(p(t||null),t){let r=e.products.filter(e=>e.companyId===t.id);x(r)}}}catch(e){u("Failed to refresh state: "+(e instanceof Error?e.message:String(e)))}};return(0,a.jsx)(y.Provider,{value:{simulation:r,state:s,loading:c,error:l,userCompany:m,companyProducts:h,advancePeriod:()=>{if(r)try{let e=r.advancePeriod();if(o(e),m){let t=e.companies.find(e=>e.id===m.id);if(p(t||null),t){let r=e.products.filter(e=>e.companyId===t.id);x(r)}}}catch(e){u("Failed to advance period: "+(e instanceof Error?e.message:String(e)))}},submitDecision:e=>{if(r&&m)try{r.submitDecision(m.id,e),f()}catch(e){u("Failed to submit decision: "+(e instanceof Error?e.message:String(e)))}},refreshState:f},children:t})};function b(e){let{children:t,className:r=""}=e;return(0,a.jsx)("div",{className:"w-64 bg-gray-900 text-white flex flex-col h-screen ".concat(r),children:t})}function v(e){let{children:t,className:r=""}=e;return(0,a.jsx)("div",{className:"flex items-center p-6 ".concat(r),children:t})}function w(e){let{children:t,className:r=""}=e;return(0,a.jsx)("nav",{className:"flex-1 px-4 ".concat(r),children:t})}function S(e){let{title:t,children:r,className:i=""}=e;return(0,a.jsxs)("div",{className:"mb-6 ".concat(i),children:[(0,a.jsx)("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2",children:t}),(0,a.jsx)("div",{className:"space-y-1",children:r})]})}function j(e){let{href:t,icon:r,children:i,active:n=!1,className:s=""}=e;return(0,a.jsxs)("a",{href:t,className:"\n        flex items-center px-3 py-2 text-sm font-medium rounded-md\n        ".concat(n?"bg-indigo-600 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white","\n        ").concat(s,"\n      "),children:[r&&(0,a.jsx)("span",{className:"mr-3",children:r}),i]})}function N(e){let{children:t,className:r=""}=e;return(0,a.jsx)("div",{className:"p-4 border-t border-gray-700 ".concat(r),children:t})}function k(e){let{title:t,actions:r,className:i=""}=e;return(0,a.jsxs)("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between ".concat(i),children:[(0,a.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:t}),r&&(0,a.jsx)("div",{className:"flex items-center space-x-4",children:r})]})}function P(e){let{children:t,sidebar:r,header:i,className:n=""}=e;return(0,a.jsxs)("div",{className:"flex h-screen bg-gray-100 ".concat(n),children:[r,(0,a.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i,(0,a.jsx)("main",{className:"flex-1 overflow-y-auto p-6",children:t})]})]})}function I(e){let{children:t,variant:r="primary",size:i="md",className:n="",onClick:s,disabled:o=!1,type:c="button",icon:d}=e;return(0,a.jsxs)("button",{type:c,className:"".concat("inline-flex items-center justify-center font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none"," ").concat({primary:"bg-indigo-600 text-white hover:bg-indigo-700 focus:ring-indigo-500",secondary:"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-indigo-500",outline:"bg-transparent text-indigo-600 border border-indigo-600 hover:bg-indigo-50 focus:ring-indigo-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"}[r]," ").concat({sm:"text-xs px-2.5 py-1.5 rounded",md:"text-sm px-4 py-2 rounded-md",lg:"text-base px-6 py-3 rounded-md"}[i]," ").concat(n),onClick:s,disabled:o,children:[d&&(0,a.jsx)("span",{className:"mr-2",children:d}),t]})}function C(e){let{children:t}=e,[r,n]=i.useState(0),[s,o]=i.useState("dashboard");return(0,a.jsx)(P,{sidebar:(0,a.jsxs)(b,{children:[(0,a.jsxs)(v,{children:[(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-8 h-8 text-indigo-500 mr-3",children:[(0,a.jsx)("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),(0,a.jsx)("path",{d:"M2 17l10 5 10-5"}),(0,a.jsx)("path",{d:"M2 12l10 5 10-5"})]}),(0,a.jsx)("span",{className:"text-xl font-bold",children:"BusinessSim"})]}),(0,a.jsxs)(w,{children:[(0,a.jsxs)(S,{title:"Main",children:[(0,a.jsx)(j,{href:"/dashboard",active:"dashboard"===s,icon:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[(0,a.jsx)("rect",{x:"3",y:"3",width:"7",height:"7"}),(0,a.jsx)("rect",{x:"14",y:"3",width:"7",height:"7"}),(0,a.jsx)("rect",{x:"14",y:"14",width:"7",height:"7"}),(0,a.jsx)("rect",{x:"3",y:"14",width:"7",height:"7"})]}),children:"Dashboard"}),(0,a.jsx)(j,{href:"/performance",active:"performance"===s,icon:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[(0,a.jsx)("path",{d:"M12 20V10"}),(0,a.jsx)("path",{d:"M18 20V4"}),(0,a.jsx)("path",{d:"M6 20v-4"})]}),children:"Performance"}),(0,a.jsx)(j,{href:"/market",active:"market"===s,icon:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("polygon",{points:"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"})]}),children:"Market"})]}),(0,a.jsxs)(S,{title:"Management",children:[(0,a.jsx)(j,{href:"/human-resources",active:"human-resources"===s,icon:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[(0,a.jsx)("path",{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),(0,a.jsx)("circle",{cx:"8.5",cy:"7",r:"4"}),(0,a.jsx)("line",{x1:"20",y1:"8",x2:"20",y2:"14"}),(0,a.jsx)("line",{x1:"23",y1:"11",x2:"17",y2:"11"})]}),children:"Human Resources"}),(0,a.jsx)(j,{href:"/marketing",active:"marketing"===s,icon:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[(0,a.jsx)("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),(0,a.jsx)("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})]}),children:"Marketing"}),(0,a.jsx)(j,{href:"/production",active:"production"===s,icon:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[(0,a.jsx)("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),(0,a.jsx)("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),children:"Production"}),(0,a.jsx)(j,{href:"/finance",active:"finance"===s,icon:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[(0,a.jsx)("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),(0,a.jsx)("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]}),children:"Finance"}),(0,a.jsx)(j,{href:"/research",active:"research"===s,icon:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:(0,a.jsx)("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),children:"R&D"})]}),(0,a.jsxs)(S,{title:"Products",children:[(0,a.jsx)(j,{href:"/products",active:"products"===s,icon:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[(0,a.jsx)("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),(0,a.jsx)("polyline",{points:"3.27 6.96 12 12.01 20.73 6.96"}),(0,a.jsx)("line",{x1:"12",y1:"22.08",x2:"12",y2:"12"})]}),children:"Product Catalog"}),(0,a.jsx)(j,{href:"/products/new",active:"new-product"===s,icon:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),(0,a.jsx)("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]}),children:"New Product"})]})]}),(0,a.jsx)(N,{children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-indigo-600 flex items-center justify-center text-white font-semibold mr-3",children:"JD"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-white",children:"John Doe"}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:"CEO"})]})]})})]}),header:(0,a.jsx)(k,{title:"Business Simulation",actions:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center bg-gray-100 rounded-md px-3 py-1.5",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-500 mr-2",children:"Period:"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["Q",r+1," 2025"]})]}),(0,a.jsx)(I,{variant:"primary",onClick:()=>n(r+1),children:"Advance to Next Period"})]})}),children:t})}function _(){let{state:e,userCompany:t,companyProducts:r,advancePeriod:i,loading:n,error:s}=x(),{getCompanyPerformance:o,getMarketConditions:c,getMarketEvents:d,getCurrentPeriod:l}=function(){let{state:e,userCompany:t,companyProducts:r}=x(),a=t=>e?void 0!==t?e.marketConditions.find(e=>e.period===t)||null:e.marketConditions.sort((e,t)=>t.period-e.period)[0]||null:null;return{getCompanyPerformance:r=>e&&t?void 0!==r?e.performanceResults.find(e=>e.companyId===t.id&&e.period===r)||null:e.performanceResults.filter(e=>e.companyId===t.id).sort((e,t)=>t.period-e.period)[0]||null:null,getCompanyPerformanceHistory:()=>e&&t?e.performanceResults.filter(e=>e.companyId===t.id).sort((e,t)=>e.period-t.period):[],getProductPerformance:(t,r)=>e?void 0!==r?e.productPerformance.find(e=>e.productId===t&&e.period===r)||null:e.productPerformance.filter(e=>e.productId===t).sort((e,t)=>t.period-e.period)[0]||null:null,getProductPerformanceHistory:t=>e?e.productPerformance.filter(e=>e.productId===t).sort((e,t)=>e.period-t.period):[],getMarketConditions:a,getMarketEvents:t=>e?void 0!==t?e.events.filter(e=>e.period===t):e.events.sort((e,t)=>e.period-t.period):[],getCurrentPeriod:()=>e?e.currentPeriod:0,getCompetitors:()=>e&&t?[{id:"competitor_1",name:"Alpha Corp",marketShare:24.5,growth:3.2,strengths:["Brand Recognition","Product Quality","Innovation"],weaknesses:["High Prices","Limited Product Range"],strategy:"Differentiation",products:[{name:"Alpha Premium",segment:"premium",price:320,quality:8.7,share:35},{name:"Alpha Standard",segment:"mid-range",price:180,quality:7.2,share:22}]},{id:"competitor_2",name:"Beta Inc",marketShare:19.8,growth:4.5,strengths:["Competitive Pricing","Wide Distribution","Marketing"],weaknesses:["Average Quality","Customer Service"],strategy:"Cost Leadership",products:[{name:"Beta Elite",segment:"premium",price:280,quality:8.2,share:28},{name:"Beta Standard",segment:"mid-range",price:160,quality:6.8,share:18},{name:"Beta Basic",segment:"budget",price:70,quality:5.1,share:15}]},{id:"competitor_3",name:"Gamma Ltd",marketShare:15.2,growth:-.8,strengths:["Low Prices","Efficiency","Market Coverage"],weaknesses:["Product Quality","Innovation","Brand Perception"],strategy:"Cost Focus",products:[{name:"Gamma Standard",segment:"mid-range",price:140,quality:6.2,share:14},{name:"Gamma Basic",segment:"budget",price:60,quality:4.8,share:25}]}]:[],getMarketSegments:()=>{if(!e)return[];let t=a();if(!t)return[];let r=JSON.parse(t.segmentDistribution),i=JSON.parse(t.consumerPreferences);return Object.keys(r).map(e=>{let a=i[e]||{};return{id:e,name:e.charAt(0).toUpperCase()+e.slice(1).replace("-"," "),size:t.totalMarketSize*r[e],share:100*r[e],growth:3+4*Math.random()-2,priceRange:"premium"===e?"$250-$500":"mid-range"===e?"$100-$250":"$50-$100",qualitySensitivity:a.quality_sensitivity>.6?"High":a.quality_sensitivity>.4?"Medium":"Low",priceSensitivity:a.price_sensitivity>.6?"High":a.price_sensitivity>.4?"Medium":"Low",innovationPreference:a.innovation_preference>.6?"High":a.innovation_preference>.4?"Medium":"Low",sustainabilityPreference:a.sustainability_preference>.6?"High":a.sustainability_preference>.4?"Medium":"Low"}})}}}(),{submitProductDevelopment:u,submitProduction:m,submitMarketing:p,submitPricing:h}=function(){let{submitDecision:e,userCompany:t,state:r}=x();return{submitProductDevelopment:a=>{t&&r&&e({companyId:t.id,period:r.currentPeriod,type:"product_development",data:JSON.stringify(a),submittedAt:new Date().toISOString()})},submitPricing:a=>{t&&r&&e({companyId:t.id,period:r.currentPeriod,type:"pricing",data:JSON.stringify(a),submittedAt:new Date().toISOString()})},submitProduction:a=>{t&&r&&e({companyId:t.id,period:r.currentPeriod,type:"production",data:JSON.stringify(a),submittedAt:new Date().toISOString()})},submitMarketing:a=>{t&&r&&e({companyId:t.id,period:r.currentPeriod,type:"marketing",data:JSON.stringify(a),submittedAt:new Date().toISOString()})},submitResearch:a=>{t&&r&&e({companyId:t.id,period:r.currentPeriod,type:"research",data:JSON.stringify(a),submittedAt:new Date().toISOString()})},submitHumanResources:a=>{t&&r&&e({companyId:t.id,period:r.currentPeriod,type:"human_resources",data:JSON.stringify(a),submittedAt:new Date().toISOString()})},submitFinance:a=>{t&&r&&e({companyId:t.id,period:r.currentPeriod,type:"finance",data:JSON.stringify(a),submittedAt:new Date().toISOString()})}}}(),g=l(),y=o(),f=c(),b=d(g),v=(e,t)=>{m({productId:e,productionVolume:t})},w=(e,t)=>{h({productId:e,price:t})},S=(e,t)=>{p({productId:e,budget:t})},j=e=>{u({action:"new_product",...e})};return n?(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Loading simulation..."})}):s?(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-red-600",children:"Error"}),(0,a.jsx)("p",{children:s})]}):t?(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:t.name}),(0,a.jsxs)("p",{className:"text-gray-600",children:["Period ",g]})]}),(0,a.jsx)("button",{onClick:()=>{i()},className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Advance to Next Period"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Financial Overview"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md",children:[(0,a.jsx)("p",{className:"text-gray-600",children:"Cash Balance"}),(0,a.jsxs)("p",{className:"text-2xl font-bold",children:["$",t.cashBalance.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md",children:[(0,a.jsx)("p",{className:"text-gray-600",children:"Total Assets"}),(0,a.jsxs)("p",{className:"text-2xl font-bold",children:["$",t.totalAssets.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md",children:[(0,a.jsx)("p",{className:"text-gray-600",children:"Total Liabilities"}),(0,a.jsxs)("p",{className:"text-2xl font-bold",children:["$",t.totalLiabilities.toLocaleString()]})]})]}),y&&(0,a.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md",children:[(0,a.jsx)("p",{className:"text-gray-600",children:"Revenue"}),(0,a.jsxs)("p",{className:"text-2xl font-bold",children:["$",y.revenue.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md",children:[(0,a.jsx)("p",{className:"text-gray-600",children:"Costs"}),(0,a.jsxs)("p",{className:"text-2xl font-bold",children:["$",y.costs.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md",children:[(0,a.jsx)("p",{className:"text-gray-600",children:"Profit"}),(0,a.jsxs)("p",{className:"text-2xl font-bold ".concat(y.profit>=0?"text-green-600":"text-red-600"),children:["$",y.profit.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md",children:[(0,a.jsx)("p",{className:"text-gray-600",children:"Market Share"}),(0,a.jsxs)("p",{className:"text-2xl font-bold",children:[(100*y.marketShare).toFixed(1),"%"]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Products"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full bg-white",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-50 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Name"}),(0,a.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-50 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Category"}),(0,a.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-50 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-50 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Quality"}),(0,a.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-50 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Price"}),(0,a.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-50 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Inventory"}),(0,a.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-50 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:r.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"py-2 px-4 border-b border-gray-200",children:e.name}),(0,a.jsx)("td",{className:"py-2 px-4 border-b border-gray-200",children:e.category.charAt(0).toUpperCase()+e.category.slice(1)}),(0,a.jsx)("td",{className:"py-2 px-4 border-b border-gray-200",children:(0,a.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("active"===e.status?"bg-green-100 text-green-800":"development"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})}),(0,a.jsx)("td",{className:"py-2 px-4 border-b border-gray-200",children:e.qualityRating.toFixed(1)}),(0,a.jsxs)("td",{className:"py-2 px-4 border-b border-gray-200",children:["$",e.sellingPrice]}),(0,a.jsx)("td",{className:"py-2 px-4 border-b border-gray-200",children:e.inventoryLevel}),(0,a.jsxs)("td",{className:"py-2 px-4 border-b border-gray-200",children:[(0,a.jsx)("button",{onClick:()=>v(e.id,1e3),className:"text-blue-600 hover:text-blue-900 mr-2",children:"Produce"}),(0,a.jsx)("button",{onClick:()=>w(e.id,e.sellingPrice+10),className:"text-green-600 hover:text-green-900 mr-2",children:"Adjust Price"}),(0,a.jsx)("button",{onClick:()=>S(e.id,1e4),className:"text-purple-600 hover:text-purple-900",children:"Marketing"})]})]},e.id))})]})}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)("button",{onClick:()=>j({name:"New Product",description:"A new product",category:"mid-range",qualityRating:6,innovationRating:5,sustainabilityRating:5,productionCost:100,sellingPrice:200,productionCapacity:2e3,developmentCost:1e5,developmentTime:1}),className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded",children:"Develop New Product"})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Market Information"}),f&&(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Market Conditions"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md",children:[(0,a.jsx)("p",{className:"text-gray-600",children:"Total Market Size"}),(0,a.jsxs)("p",{className:"text-xl font-bold",children:["$",f.totalMarketSize.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md",children:[(0,a.jsx)("p",{className:"text-gray-600",children:"Sustainability Importance"}),(0,a.jsxs)("p",{className:"text-xl font-bold",children:[(100*f.sustainabilityImportance).toFixed(1),"%"]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md",children:[(0,a.jsx)("p",{className:"text-gray-600",children:"Segments"}),(0,a.jsx)("p",{className:"text-xl font-bold",children:Object.keys(JSON.parse(f.segmentDistribution)).length})]})]})]}),b.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Market Events"}),(0,a.jsx)("div",{className:"space-y-4",children:b.map(e=>(0,a.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-md",children:[(0,a.jsx)("h4",{className:"font-semibold",children:e.name}),(0,a.jsx)("p",{className:"text-gray-700",children:e.description}),(0,a.jsxs)("div",{className:"mt-2 flex items-center",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["Impact: ",e.impactArea]}),(0,a.jsx)("span",{className:"mx-2",children:"•"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["Strength: ",e.impactStrength>0?"+":"",(100*e.impactStrength).toFixed(0),"%"]})]})]},e.id))})]})]})]}):(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"No company found"}),(0,a.jsx)("p",{children:"Please create a company to start the simulation."})]})}function A(){let{user:e,loading:t}=l();return t?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Loading..."}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"Please wait while we set up your simulation"})]})}):e?(0,a.jsx)(f,{children:(0,a.jsx)(C,{children:(0,a.jsx)(_,{})})}):(0,a.jsx)(p,{})}function O(){return(0,a.jsx)(o,{children:(0,a.jsx)(d,{children:(0,a.jsx)(A,{})})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[634,775,358],()=>t(8639)),_N_E=e.O()}]);